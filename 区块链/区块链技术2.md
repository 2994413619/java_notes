# 区块链技术2

私钥和地址是非对称的关系，通过私钥可以获得地址

## BTC

**交易签名：**

交易进行hash得到摘要

用私钥对摘要进行签名

签名过程：

1. 对原始交易数据进行hash运算，得到hash摘要
2. 对摘要和私钥进行签名运算，得到签名信息

```javascript
hash('
"付款地址":"0x77b228ec34418eaeaf26f70b1d3c839d0a7e0b8a",
"收款地址地址":"0x77b228ec34418eaeaf26f70b1d3c839d0a7e0b8a",
"金额":"0.2btc",
')        ->         5d5b78da78b
//参数1：hash摘要
//参数2：私钥
sign（"5d5b78da78b","J4557sdfjklasd427"）->"32asd7f5asdf45"
```

生成签名后，初始节点会把交易信息和签名广播给已知的附近节点，收到信息的节点继续广播给自己已知的附近接地啊。接受到信息的节点会把数据进行验证

```javascript
//参数1：签名信息
//参数2：付款方地址
//返回值：交易摘要
verify("32asd7f5asdf45","0x77b228ec34418eaeaf26f70b1d3c839d0a7e0b8a") -> "5d5b78da78b"
```

争夺记账权做的计算：

Hash(上一个hash值，交易记录集，随机数) = 0000aFD635

不断改变随机数进行计算，谁先计算出若干个零开头的数字，谁就有记账权

交易记录集：

收集广播中还没有被记录账本的交易

交易的有效性验证

